package com.zml.shsite.components;

import java.io.CharArrayWriter;
import java.io.PrintWriter;

import javax.servlet.http.HttpServletResponse;
import javax.servlet.http.HttpServletResponseWrapper;
/**
 * http返回包装器
 * @author fhr
 * @date 2017/04/11
 */
public class ResponseWrapper extends HttpServletResponseWrapper  {
	
	private PrintWriter cachedWriter;  
	private CharArrayWriter bufferedWriter;  

	public ResponseWrapper(HttpServletResponse response) {
		super(response);
		// 这个是我们保存返回结果的地方  
        bufferedWriter = new CharArrayWriter();  
        // 这个是包装PrintWriter的，让所有结果通过这个PrintWriter写入到bufferedWriter中  
        cachedWriter = new PrintWriter(bufferedWriter);  
	}
	//关键重写这个
	@Override  
	public PrintWriter getWriter() {
		return cachedWriter;
	}

	public CharArrayWriter getBufferedWriter() {
		return bufferedWriter;
	}
	/** 
     * 获取原始的HTML页面内容。 
     * @return 
     */  
    public String getResult() {  
        return bufferedWriter.toString();  
        
    }  
}
