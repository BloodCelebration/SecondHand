<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>   
<%@taglib uri="http://www.springframework.org/tags/form" prefix="form" %>  
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="stylesheet" type="text/css" href="/ShSite/css/bootstrap.css">
<link rel="stylesheet" href="/ShSite/css/bootstrapValidator.css"/>
<link rel="stylesheet" type="text/css" href="/ShSite/css/bootstrap-theme.css">
<script src="/ShSite/js/jquery-1.10.2.js" type="text/javascript"></script>
<script src="/ShSite/js/bootstrap.js"	type="text/javascript"></script>
<script type="text/javascript" src="/ShSite/js/bootstrapValidator.js"></script>
<link rel="stylesheet" type="text/css" href="/ShSite/css/site.css">
<title>校园二手交易系统</title>
</head>
<body>
	<%@ include file="../header.jsp" %>
	<div class="row" id="main">
		<!-- 商品导航 -->
	     <%@ include file="../catalogue.jsp" %>
	    <!-- 主框架 -->
		<div class="container col-lg-10">
		  <form method="post" action="/ShSite/Account/Register" enctype="multipart/form-data"
		  		d="defaultForm" class="form-horizontal"
                data-bv-message="This value is not valid"
                data-bv-feedbackicons-valid="glyphicon glyphicon-ok"
                data-bv-feedbackicons-invalid="glyphicon glyphicon-remove"
                data-bv-feedbackicons-validating="glyphicon glyphicon-refresh">
                <div class="row">
	                <div class="col-md-4" id="left">
	                <img id="image" src="" style="width:300px;height:300px;"/>
	                <input type="file" name="imgFile" id="file" onchange="selectImage(this);"/>
	                </div>
	                <div class="col-md-4" id="right">
	                		
	                		<input type="hidden" name="GoodId" value="" />
                    		<input type="hidden" name="ShUserId" value="${sessionScope.user.getShUserId()}" />
		               	
		               		<div class="form-group">
		                        <label class="col-lg-3 control-label">商品名称：</label>
		                        <div class="col-lg-5">
		                            <input type="text" class="form-control" name="GoodName"
		                                   data-bv-message="商品名称无效"
		                                   required data-bv-notempty-message="商品名称不能为空"
		                                   data-bv-stringlength="true" data-bv-stringlength-min="5" data-bv-stringlength-max="10" data-bv-stringlength-message="商品名称必须保证在5到10个字符"
		                           		/>
		                        </div>
	                        </div>
	                        
	                       <div class="form-group">
		                        <label class="col-lg-3 control-label">商品类别：</label>
		                        <div class="col-lg-5">
		                           	<select class="form-control" name="GoodTypeId" 
		                           	     	data-bv-notempty data-bv-notempty-message="商品类别不能为空">
		                           	     	<c:forEach items="${goodTypes}" var="goodType">
										  	<option value="${goodType.getGoodTypeId()}">${goodType.getGoodTypeName()}</option>
											</c:forEach>
                            		</select>
		                        </div>
		                    </div>  
		                    
		                    <div class="form-group">
		                        <label class="col-lg-3 control-label">商品描述</label>
		                        <div class="col-lg-5">
		                            <textarea name="Description" style="height:100px;width:400px;" type="text" class="form-control"
		                            		 required data-bv-notempty-message="内容不能够为空"
		                            		 data-bv-stringlength="true" data-bv-stringlength-min="5" data-bv-stringlength-max="50" data-bv-stringlength-message="商品描述必须保证在5到20个字符">
		                        	</textarea>
		                        </div>
		                    </div>
	                    	
	                    	<div class="form-group">
		                        <label class="col-lg-3 control-label">商品价格：</label>
		                        <div class="col-lg-5">
		                            <input type="text" class="form-control" name="GoodPrice"
		                                   data-bv-message="商品价格无效"
		                                   required data-bv-notempty-message="商品价格不能为空"
		                           		/>
		                        </div>
	                        </div>
	                    	
	                    <div class="form-group">
	                        <div class="col-lg-9 col-lg-offset-3">
	                            <button type="submit" class="btn btn-primary">确认发布</button>
	                        </div>
	                    </div>
	                </div>
                </div>
          </form>
		</div>
	</div>
	<%@ include file="../footer.jsp" %>
</body>
<script type="text/javascript">
	$(document).ready(function() {
	    $('#defaultForm').bootstrapValidator();
	});
	var image = '';
	function selectImage(file) {
	    if (!file.files || !file.files[0]) {
	        return;
	    }
	    var reader = new FileReader();
	    reader.onload = function (evt) {
	        document.getElementById('image').src = evt.target.result;
	        image = evt.target.result;
	    }
	    reader.readAsDataURL(file.files[0]);
	}
</script>
</html>