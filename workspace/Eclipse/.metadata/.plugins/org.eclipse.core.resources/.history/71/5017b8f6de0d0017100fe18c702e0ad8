package com.zml.shsite.components;

import java.io.File;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;

import org.springframework.stereotype.Component;
import org.springframework.stereotype.Repository;
import org.springframework.stereotype.Service;
import org.springframework.web.multipart.MultipartFile;

import com.zml.shsite.services.IFileService;
@Component
public class FileComponentUtil{

	public boolean fileSaveOrUpdate(String desDir, MultipartFile file, String filename) {
		try {
			fileDelete(String.format("%s\\%s", ))fileName)
			saveFileFromInputStream(file.getInputStream(), destinationDir, filename);
		} catch (IOException e) {
			return false;
		}
		return true;
	}
	
	
	public boolean fileSave(String desDir, MultipartFile file, String filename) {
		try {
			saveFileFromInputStream(file.getInputStream(), desDir, filename);
		} catch (IOException e) {
			return false;
		}
		return true;
	}

	public boolean fileDelete(String fileName) {
		File file = new File(fileName);
		if (file.exists() && file.isFile()) {
			if (file.delete()) {
				return true;
			}
		}
		return false;
	}
	private void saveFileFromInputStream(InputStream stream, String path, String filename) throws IOException {
		FileOutputStream outputStream = new FileOutputStream(path + "/" + filename);
		int byteCount = 0;
		byte[] bytes = new byte[2048];
		while ((byteCount = stream.read(bytes)) != -1) {
			outputStream.write(bytes, 0, byteCount);
		}
		outputStream.close();
		stream.close();
	}
}
